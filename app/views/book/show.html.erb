<% unless params[:notice].nil? %>
    <div class="notice">
      <p><%= params[:notice] %></p>
    </div>
<% end %>

<% content_for :title do %>
    Book: <%= @book.title %>
<% end %>

<script type="text/javascript">
  $(function() {
    var book_id = "<%= @book.id %>";
    window.load_history(book_id, $("ul", ".book_history"));
  });
</script>

<div class="availability">
  <p>Availability:
    <% if @book.available? %>
        <span class="available">Available</span>
    <% else %>
        <span class="borrowed">Borrowed</span>
    <% end %>
  </p>
</div>

<div class="book_controls">
  <h4>Options:</h4>
  <% if @book.available? then %>
    <%= link_to "Borrow", controller: :book, action: :borrow %>
  <% else %>
    <%= link_to "Return", controller: :book, action: :return %>
  <% end %>
</div>

<div class="book_history">
  <h4>Book History:</h4>
  <ul></ul>
</div>